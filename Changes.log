<<<202118 송영준 2025-11-01>>>

Object 추가, 충돌처리 적용 완료

[세부 수정 사항]
1. Object 생성과 Init과 같은 틀을 작성

2. std::vector로 선언한 동적, 정적 오브젝트와 array로 생성한 Player를 Object.h와 Player.h에 extern으로 생성
- 사용할 때는 extern을 붙여서 가지고 오거나 하면 됨

2. setting, input_block_pos, place_platform의 매개변수를 수정(위에서 선언한 컨테이너들을 직접적으로 사용하는 구조가 아님)

3. setting 함수에서 staticObj, dynamicObj의 형태로 자료구조를 매개변수로 받아 사용하게 만들었음

4. input_block_pos의 내용을 Object안에 들어가도록 수정

5. place_platform의 내용을 vector 내부를 가리키게 바꿔서 Object 여럿 생성

6. Object 내부에 GetPosVec3추가(pos를 glm::vec3로 변환해서 반환)
- 이에따라 Object에서 추가적인 include가 발생하였음
- 필요 시 클래스 내부가 아니라 외부에서 변환하도록 수정

7. check_Collision의 경우 정적 오브젝트와의 충돌 책임이 Player에 있다고 여겼기에 함수 자체를 분리하지는 않았다
- 충돌 처리 성공 이라는 가정하에 위의 멤버 함수를 이용해 pos를 변환한 다음에 일시적인 1차원 배열을 만들어 거기에 대입하여 사용하는 방식으로 바꾸었음
- 현재 계획에서 Bounding Box를 클래스가 가지는 계획이 아니므로 Object 내부에 추가하지 않고 구현

<<<202118 김준호 2025-11-01>>>

Moving Object 추가

[세부 수정 사항]

1. MovingObject의 초기화는 void Init(float newPos[3], int newDir[3]); 으로 방향도 필요하기 때문에 새로 만들어서 오버로딩으로 구현. 
GetPosVec3()는 Object로부터 상속받고, 추가적으로 GetDirVec3(); 를 구현.
CallbackFuncs.cpp의 움직이는 코드를 Update()에 옮김.

<<<202118 이현석 2025-11-01>>> (Due: 2025-11-02, Finished D-1)

Player class 함수 구현

[세부 수정 사항]
1. Player class의 Update() 함수 구현
 - WASD 입력 시 플레이어 회전방향 기준 해당 방향으로 이동
 - 스페이스바 입력 시 isGrounded면 점프
 - 자유낙하 구현

2. Player class의 Init()에서 id까지 할당하도록 수정

3. Object class의 GetPosVec3() 함수 const로 변경
 (CheckCollision(const Object& other);처럼 인자가 const면 const 함수만 호출 가능)

4. Player class의 CheckCollision() 구현

5. GameState에 있던 CheckOBBCollision() 함수 Player에서 사용하려면 상호 include 돼버려서 MeshData로 옮김

<<<202118 이현석 2025-11-02>>> (Due: 2025-11-03, Finished D-1)

Client Socket 생성

[세부 수정 사항]
1. Client에서 Server 접근용 소켓 관련 코드 작성
- 윈속 초기화
- 소켓 생성
- connect

2. 소켓 에러 함수 err_quit, err_display 생성. 클라이언트 소켓 코드에 적용



<<<2021184018 송영준 2025-11-05>>>

Server Socket 생성

[세부 수정 사항]

1. 클라이언트 코드로부터 서버가 사용할 코드를 따로 가져와서 새 프로젝트에 적용하였음
- 클라이언트로 부터 Object, MovingObject, Player 가져와 적용
- glm관련 라이브러리만 가지고 있으면 되므로 freeglut, glew등은 include하지 않은 계획임


2.  Server에서 사용할 소켓 생성 코드 작성
- 윈속 초기화
- 소켓 생성



****추후 고려사항****
클라이언트와 서버의 코드가 중복되는 부분이 상당히 많음
- 이를 고려하여 lib나 dll로 공통된 코드를 라이브버리 파일로 만들고 이를 클라이언트와 서버가 가져와서 사용하는 방식은 어떨까 싶음

<<<2021184008 김준호 2025-11-05>>>

1. Server Socket에 코드 보완

	closesocket(listen_sock);
	// 윈속 종료
	WSACleanup();

2. initWorld 코드 작성하면서 object가 하나씩 밀리는 현상 해결
3. 초기 위치 설정할 때, 인자로 하는 newPos의 타입을 const std::array<float, 3>& newPos 로 전체 오브젝트 클래스 변경
(단순히 {0.0f, 0.0f, 0.0f}의 방식으로 초기화하기 위함)
4. 그에 따라 input_block_pos(), input_moving_block_pos() 함수를 없애고 클래스의 Init함수로 초기화하는 방식으로 변경함

****추후 고려사항****
플레이어의 텍스처를 바인딩하여 적용할 때, 
현재 방식처럼 배열로 텍스처를 넣어서 적용할지, 오브젝트 클래스에 텍스처 이미지 파일 정보를 넣어 Init할 때 적용할지 고민됨.



<<<2021184018 송영준 2025-11-06>>>

1. 서버의 setting함수의 플레이어 좌표 배정 부분을 InitPlayer라는 함수를 생성해 그쪽으로 위치를 옮김
- setting에서 불러오는 방식

2. player의 초기 위치 지정을 array<array<float, 3>, 3>로 변경하여 한번에 초기화하는 방식으로 변경하였음
-> const array의 경우 안그래도 딱딱한 array의 수정 불가까지 걸리니 
초기에 설정한 데이터가 결단코 변하지 않을 것임을 가정하겠음

3. InitWorld에 해당하는 내용을 이미 setting이 수행하고 있음
-> setting을 InitWorld로 수정해서 사용할 지, 반대로 계획서의 InitWorld를 setting으로 수정할 지에 대한 가벼운 논의 필요


4. Accept 구현 완료
- 클라이언트와의 연결을 구현하였으나 현재로선 다른 기기이므로 제대로된 연결임을 확신할 수 없음
-> 금요일에 다른 기기에서 실제로 연결해볼 것임!

5. 임시로 ThreadParam 구조체 생성
- 계속 유지될 지는 알 수 없지만 생성할 때 미리 Player의 id를 배정해서 보내주기 위해 넣어주는 매개변수에 소켓과 id를 같이 전송


* 금요일에 계획서 수정할거임

<<<2021182031 이현석 2025-11-07>>>
Set Player + CallbackFuncs에 Player 설정

1. 3개 Player 전부 화면에 나타나게 했으며 각자 해당되는 텍스쳐 할당함.

2. CallbackFuncs에 있던 char_pos 등 구버전 변수 사용하던거 전부 Player 클래스 변수/함수로 변경

3. gl 이벤트 발생시 Player[MyID].inputs 수정으로 변경. 
	MyID은 전역변수로 선언되어있음, 서버에서 id 할당 받으면 클라이언트에서 해당 오브젝트의 inputs를 수정함.

4. TimerFunction에서 모든 Player Update, 충돌검사 수행함.


<<<2021184008 김준호 2025-11-05>>>

1. GL 초기화를 위한 InitGL 코드 정리 및 리팩토링


<<<2021182031 이현석 2025-11-10>>>
RecvInit 구현

1. 클라이언트 socket 함수(윈속 초기화 ~ connect) 함수화 해서 뺌.

2. RecvInitPlayers, RecvInitWorldStatic, RecvInitWorldDynamic 각각 구현

3. main에 주석 상태로 Recv 함수 추가




<<<2021184018 송영준 2025-11-10 ~ 2025-11-12>>>

1. SendInitOnePlayer 추가 구현
2. PacketStruct의 PkInitPlayer 구조체에 Serialize, Deserialize 멤버 함수 추가함
- id, 좌표들을 묶어서 하나의 vector에 담아서 전송하는 함수, 반대로 vector를 다시 id와 좌표로 분할하는 함수
- 같은 방식은 추후 Player 좌표의 소수 부분을 잘라낼 가능성이 있으니 다시 사용할 때는 조금 다른 방식을 적용할 필요가 있다
3. SendInitPlayers, SendInitWorldStatic, SendInitWorldDynamic 모두 구현
4. RecvInitPlayers, RecvInitWorldStatic, RecvInitWorldDynamic를 Send의 방식에 맞게 수정하였음
5. send_all, recv_all 추가
- 한번에 모두 보내지 않고 부분을 나누어서 전송하는 구조
- 일단은 그냥 send, recv 쓸 것이지만 추후에 recv나 send가 한번에 읽지 못하는 경우가 발생할 수 있으므로
- 이 경우를 확인했다면 이 함수를 쓸 것

6. 이제 Client에서 setting과 그 관련된 함수는 이제 있을 필요가 없으므로 지웠음




<<<2021184018 송영준 2025-11-14 ~ 2025-11-16>>>

1. ServerProcess, ClientProcess 생성
- 송수신 쓰레드

2. Pkt_Frame_State 추가, State는 여러 자료형을 가지고 있으므로 하나의 자료구조로 묶는 함수도 작성함
3.  Pkt_Frame_State 보호용 임계영역 생성, 이 구조체에 쓰기, 읽기 작업을 임계영역을 통하여 보호함
3. ServerMainLoop 추가
- 서버에서의 메인 로직을 처리하는 함수
4. SendWorld 구현
-> 월드 정보를  Pkt_Frame_State에 담아서 전송
3. main에 주석 상태로 Recv 함수 추가

<<<2021182031 이현석 2025-11-14>>>

1. 마우스 이동 시 PlayerInputs delta X, Y 변경되도록 수정
//키 입력은 (2025-11-07)에 완료해놨음

<<<2021182031 이현석 2025-11-16>>>
SendInputChange() 구현

1.PacketParam 헤더를 구성해 패킷 타입(PACK_INPUT_COMMAND)과 전체 전송 크기를 계산

2.PlayerInputs 구조체를 그대로 바이트 단위로 send() 하여 입력값을 서버로 전달
